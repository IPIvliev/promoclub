<%= form_for(@user) do |f| %>
  <% if @user.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@user.errors.count, "error") %> prohibited this article from being saved:</h2>

      <ul>
      <% @user.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

              <div class="col-md-3">
                <%= image_tag @user.avatar.thumb.url if @user.avatar? %> <%= f.file_field :avatar, :class => "form-control" %>
              </div>


              <div class="col-md-9"><br><br>
                <div class="form-group">
                  <div class="col-md-4">
                    <label><strong>Фамилия:</strong></label>
                    <%= f.text_field :surname, :placeholder => @user.surname, :class => "form-control" %>
                  </div>
                  <div class="col-md-4">
                    <label><strong>Имя:</strong></label>
                    <%= f.text_field :name, :placeholder => @user.name, :class => "form-control" %>
                  </div>
                  <div class="col-md-4">
                    <label><strong>Отчество:</strong></label>
                    <%= f.text_field :patronymic, :placeholder => @user.patronymic, :class => "form-control" %>
                  </div>
                </div>
                <div class="form-group">
                  <div class="col-md-4">
                    <label><strong>Страна:</strong></label><br>
<%= f.collection_select :country_id,  @countries,  :id, :name, {:prompt   => "Выберите страну"}, {:id => 'countries_select'} %>
</div>

<div class="col-md-4">
<label><strong>Регион:</strong></label><br>
<%= f.collection_select :state_id, @states, :id, :name, {:prompt   => "Выберите регион"}, {:id => 'states_select'} %>
</div>

<div class="col-md-4">
<label><strong>Город:</strong></label><br>
<%= f.collection_select :city_id, @cities, :id, :name, {:prompt   => "Выберите город"}, {:id => 'cities_select'} %>
</div>

<script type="text/javascript">
  $(document).ready(function() {
    $('#countries_select').change(function() {
      $.ajax({
        url: "<%= update_states_path %>",
        data: {
          country_id : $('#countries_select').val()
        },
        dataType: "script"
      });
    });
    $('#states_select').change(function() {
      $.ajax({
        url: "<%= update_cities_path %>",
        data: {
          state_id : $('#states_select').val()
        },
        dataType: "script"
      });
    });
  });
</script>

                  </div>
                 <div class="form-group">
                  <div class="col-md-12">
                    <label><strong>Дата рождения:</strong></label>
                      <%= f.date_select :birth,
                        {:start_year => Time.now.year,
                        :end_year => 1940,
                        :use_short_month => false,
                        :order => [:day, :month, :year],
                        :prompt => {:month => 'Месяц', :day => 'День', :year => 'Год'}},
                        {:class => 'year',
                        :id => 'user_birthday'}
                      %>
                  </div>
                </div>
                <div class="form-group">
                  <div class="col-md-6">
                    <label><strong>Номер телефона:</strong></label>
                    <%= f.text_field :phone, :placeholder => @user.phone, :class => "form-control", :required => "required", :id => "phone", :class => "form-control" %>
                  </div>
                  <div class="col-md-6">
                    <label><strong>Пол:</strong></label><br>
                    <%= f.select :gender, options_for_select([ "Мужской", "Женский" ], @user.gender), :class => "form-control" %>

                  </div>
                </div>

              </div>



              <div class="row">
                <div class="form-group">
                  <div class="col-md-12">
                    <label><strong>Текст статьи</strong></label>
                    <%= f.cktext_area :description, :placeholder => @user.description, :rows => "10", :class => "form-control wysihtml5" %>
                  </div>
                </div>
              </div>

              <%= f.hidden_field :status, :value => "promo" %>

              <div class="row">
                <div class="col-md-12">
                  <%= f.submit :value => "Отправить", :class => "btn btn-primary" %>
                </div>
              </div>
<% end %>


<script type="text/javascript">
    jQuery(function($){
       $("#phone").mask("+7 (999) 999-99-99");
    });
</script>
<script src="/plugins/jquery.maskedinput.js" type="text/javascript"></script>